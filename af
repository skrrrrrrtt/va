-- CLEAN PLS DONATE SCRIPT:
-- Auto-Claim Booth + Teleport + Face Forward + Anti-AFK + Auto-Jump + Booth Text Goal

repeat task.wait() until game:IsLoaded()

_G.goalAmount = 1000  -- ðŸŽ¯ your goal (edit this anytime)

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local VirtualUser = game:GetService("VirtualUser")
local LocalPlayer = Players.LocalPlayer

-- Anti-AFK
LocalPlayer.Idled:Connect(function()
    VirtualUser:CaptureController()
    VirtualUser:ClickButton2(Vector2.new())
end)

-- Wait for UI
local pg = LocalPlayer.PlayerGui
repeat task.wait() until pg:FindFirstChild("MapUIContainer")

local BoothUI = pg.MapUIContainer.MapUI:WaitForChild("BoothUI")

-- Find unclaimed booths
local function findUnclaimed()
    local list = {}
    for _, ui in ipairs(BoothUI:GetChildren()) do
        if ui:FindFirstChild("Details") and ui.Details.Owner.Text == "unclaimed" then
            local num = tonumber(ui.Name:match("%d+"))
            for _, booth in ipairs(workspace.BoothInteractions:GetChildren()) do
                if booth:GetAttribute("BoothSlot") == num then
                    table.insert(list, num)
                end
            end
        end
    end
    return list
end

-- Updates booth text using correct remote
local function updateBoothText()
    local raised = LocalPlayer.leaderstats.Raised.Value
    local text = "GOAL " .. raised .. " / " .. _G.goalAmount

    local Rem = require(ReplicatedStorage.Remotes)
    Rem.Event("SetBoothText"):FireServer(text, "booth")
end

-- Claim booth + teleport + face forward
local function claimBooth()
    local unclaimed = findUnclaimed()
    if #unclaimed == 0 then
        warn("No unclaimed booths!")
        return
    end

    local boothNum = unclaimed[1]
    local Rem = require(ReplicatedStorage.Remotes)

    -- Claim booth
    Rem.Event("ClaimBooth"):InvokeServer(boothNum)

    task.wait(1)

    -- Teleport to booth
    for _, booth in ipairs(workspace.BoothInteractions:GetChildren()) do
        if booth:GetAttribute("BoothSlot") == boothNum then
            local hrp = LocalPlayer.Character:WaitForChild("HumanoidRootPart")

            hrp.CFrame = booth.CFrame * CFrame.new(3, 3, 3)
            task.wait(0.2)

            -- Face forward
            hrp.CFrame = CFrame.new(hrp.Position) * CFrame.Angles(0, math.rad(0), 0)
        end
    end

    updateBoothText()
    print("Booth claimed:", boothNum)
end

-- Claim on start + respawn
claimBooth()

LocalPlayer.CharacterAdded:Connect(function()
    task.wait(2)
    claimBooth()
end)

-- Auto-jump on donation + update booth text
local raisedStat = LocalPlayer.leaderstats.Raised
local last = raisedStat.Value

raisedStat.Changed:Connect(function(new)
    if new > last then
        local hum = LocalPlayer.Character:FindFirstChild("Humanoid")
        if hum then
            for i = 1, 3 do
                hum:ChangeState(Enum.HumanoidStateType.Jumping)
                task.wait(0.35)
            end
        end
        -- update text after donation
        updateBoothText()
    end
    last = new
end)

print("Loaded: Auto Booth + Face Forward + Anti-AFK + Auto Jump + Goal Text")
