-- CLEAN PLS DONATE AUTO-CLAIM + TELEPORT + ANTI-AFK + AUTO-JUMP
-- Uses real ClaimBooth remote & BoothInteractions logic from your script

repeat task.wait() until game:IsLoaded()

local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local VirtualUser = game:GetService("VirtualUser")
local LocalPlayer = Players.LocalPlayer

-- Anti-AFK
LocalPlayer.Idled:Connect(function()
    VirtualUser:CaptureController()
    VirtualUser:ClickButton2(Vector2.new())
end)

-- Wait for booth UI to load
local pg = LocalPlayer.PlayerGui
repeat task.wait() until pg:FindFirstChild("MapUIContainer")
local BoothUI = pg.MapUIContainer.MapUI:WaitForChild("BoothUI")

-- Finds unclaimed booths based on your script logic
local function findUnclaimed()
    local list = {}
    for _, ui in ipairs(BoothUI:GetChildren()) do
        if ui:FindFirstChild("Details") and ui.Details.Owner.Text == "unclaimed" then
            local num = tonumber(ui.Name:match("%d+"))
            for _, booth in ipairs(workspace.BoothInteractions:GetChildren()) do
                if booth:GetAttribute("BoothSlot") == num then
                    table.insert(list, num)
                end
            end
        end
    end
    return list
end

-- Main claim function
local function claimBooth()
    local unclaimed = findUnclaimed()
    if #unclaimed == 0 then
        warn("No unclaimed booths!")
        return
    end

    local boothNum = unclaimed[1]

    -- Claim Booth using correct remote
    local Rem = require(ReplicatedStorage.Remotes)
    Rem.Event("ClaimBooth"):InvokeServer(boothNum)

    -- TP to booth
    for _, booth in ipairs(workspace.BoothInteractions:GetChildren()) do
        if booth:GetAttribute("BoothSlot") == boothNum then
            local hrp = LocalPlayer.Character:WaitForChild("HumanoidRootPart")
            hrp.CFrame = booth.CFrame * CFrame.new(3, 3, 3)
        end
    end

    print("Booth claimed:", boothNum)
end

-- Auto claim on script start + respawn
claimBooth()
LocalPlayer.CharacterAdded:Connect(function()
    task.wait(3)
    claimBooth()
end)

-- Detect donation and jump
local raisedStat = LocalPlayer.leaderstats:WaitForChild("Raised")
local last = raisedStat.Value

raisedStat.Changed:Connect(function(new)
    if new > last then
        local hum = LocalPlayer.Character:FindFirstChild("Humanoid")
        if hum then
            for i = 1, 3 do
                hum:ChangeState(Enum.HumanoidStateType.Jumping)
                task.wait(0.35)
            end
        end
    end
    last = new
end)

print("Loaded: Auto Booth Claim + Teleport + Anti-AFK + Jump Only")
